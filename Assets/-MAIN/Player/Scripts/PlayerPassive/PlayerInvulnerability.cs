using Sirenix.OdinInspector;
using System.Collections;
using UnityEngine;

public class PlayerInvulnerability : PlayerPassive
{
    [Header("Settings")]
    public float baseInvulnerabilityTime = 0.3f;
    [ReadOnly] public bool isInvurn;

    [Header("Refs")]
    private Coroutine coroutine_InvurnTime;

    //Use the provided baseInvurn time unless specifically overwritten by providing a value in the function.
    public void StartInvulnerability(float? duration = null)
    {
        float finalDuration = duration ?? baseInvulnerabilityTime;
        if (coroutine_InvurnTime != null) { StopCoroutine(coroutine_InvurnTime); }
        coroutine_InvurnTime = StartCoroutine(InvulnerabilityRoutine(finalDuration));
    }

    public IEnumerator InvulnerabilityRoutine(float duration)
    {
        isInvurn = true;
        yield return new WaitForSeconds(duration);
        isInvurn = false;
    }

    public override void ResetPassive()
    {
        base.ResetPassive();

        isInvurn = false;
    }
}
